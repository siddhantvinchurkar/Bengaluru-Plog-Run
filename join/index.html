<!DOCTYPE HTML>
<html>
	<head>
		<title>Bengaluru Plog Run</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<noscript>
			<link rel="stylesheet" href="../assets/css/noscript.css" />
		</noscript>
		<link rel="shortcut icon" type="image/png" href="../images/favicon.png"/>
		<style>
			body {font-family: Arial, Helvetica, sans-serif;}
			/* The Modal (background) */
			.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 1; /* Sit on top */
			padding-top: 100px; /* Location of the box */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scroll if needed */
			background-color: rgb(0,0,0); /* Fallback color */
			background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
			}
			/* Modal Content */
			.modal-content {
			position: relative;
			background-color: #272833;
			margin: auto;
			padding: 0;
			border: 1px solid #FF591F;
			width: 80%;
			box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
			-webkit-animation-name: animatetop;
			-webkit-animation-duration: 0.4s;
			animation-name: animatetop;
			animation-duration: 0.4s
			}
			/* Add Animation */
			@-webkit-keyframes animatetop {
			from {top:-300px; opacity:0} 
			to {top:0; opacity:1}
			}
			@keyframes animatetop {
			from {top:-300px; opacity:0}
			to {top:0; opacity:1}
			}
			/* The Close Button */
			.close {
			color: white;
			float: right;
			font-size: 28px;
			font-weight: bold;
			}
			.close:hover,
			.close:focus {
			color: #000;
			text-decoration: none;
			cursor: pointer;
			}
			.modal-header {
			padding: 2px 10px;
			background-color: #FF591F;
			color: white;
			}
			.modal-body {padding: 2px 16px;}
			.modal-footer {
			padding: 2px 16px;
			background-color: #FF591F;
			color: white;
			}
		</style>
	</head>
	<body class="is-preload">
		<div id="page-wrapper">
			<!-- Header -->
			<header id="header">
				<h1 id="logo"><a href="../"><img id="header-logo" src="../images/logo.svg" /></a></h1>
				<nav id="nav" style="font-size:1em; font-weight:bold;">
					<ul>
						<li><a style="font-size:1.5m;" href="../">Home</a></li>
						<li><a href="../about/" class="scrolly">About Us</a></li>
						<!--<li><a href="../ambassadors/">Ambassadors</a></li>-->
						<li><a href="../community/">Community Partners</a></li>
						<!--<li><a href="https://discourse.plog.run/" target="_blank">Forum</a></li>-->
					</ul>
				</nav>
			</header>
			<!-- Main -->
			<!-- The Modal -->
			<div id="tncModal" class="modal">
				<!-- Modal content -->
				<div class="modal-content">
					<div class="modal-header">
						<span class="close">&times;</span>
						<h2>Terms and Conditions</h2>
					</div>
					<div class="modal-body">
						<p id="tncHere"></p>
					</div>
				</div>
			</div>
			<div id="main" class="wrapper style1">
				<div class="container" id="container">
					<header class="major">
						<h2>Join the Movement</h2>
						<p>Be the change you want to see. Apply to become a volunteer today!</p>
					</header>
					<!-- Content -->
					<section id="content">
						<div class="row">
							<div class="col-6">
								<form>
									<div class="row">
										<div class="col-12">
											<select id="loc">
												<option>Nearest Locality</option>
											</select>
										</div>
									</div>
									<div style="margin-top:15px; margin-bottom:15px;"></div>
									<div class="row">
										<div class="col-12">
											<input id="fn" type="text" placeholder="Name" />
										</div>
										<div class="col-8" style="display:none;">
											<input id="ln" type="text" placeholder="Last Name" value=" " />
										</div>
									</div>
									<div style="margin-top:15px; margin-bottom:15px;"></div>
									<div class="row">
										<div class="col-12">
											<input id="eml" type="email" placeholder="Email" />
										</div>
										<div class="col-8" style="display:none;">
											<input id="org" type="text" placeholder="Organization" />
										</div>
									</div>
									<div style="margin-top:15px; margin-bottom:15px;"></div>
									<div class="row">
										<div class="col-6">
											<input id="phone" type="text" placeholder="Phone" />
										</div>
										<div class="col-6">
											<input id="age" type="text" placeholder="Age" />
										</div>
										<div class="col-6" style="display:none;">
											<select id="bg">
												<option>Blood Group</option>
												<option>A +ve</option>
												<option>A -ve</option>
												<option>B +ve</option>
												<option>B -ve</option>
												<option>O +ve</option>
												<option>O -ve</option>
												<option>AB +ve</option>
												<option>AB -ve</option>
											</select>
										</div>
										<div class="col-4" style="display:none;">
											<select id="tss">
												<option>T-shirt size</option>
												<option>XXXS</option>
												<option>XXS</option>
												<option>XS</option>
												<option>S</option>
												<option>M</option>
												<option>L</option>
												<option>XL</option>
												<option>XXL</option>
												<option>XXXL</option>
											</select>
										</div>
									</div>
									<div style="margin-top:15px; margin-bottom:15px;"></div>
									<div class="row">
										<div class="col-12">
											<a id="cmi" class="button primary fit">Count me in!</a>
										</div>
									</div>
								</form>
								<div class="row">
									<div class="col-12">
										<p><a href="#!" class="icon alt fa-exclamation-circle"><span class="label">Twitter</span></a>&emsp;By clicking "Count me in!" you are agreeing to our <a id="tnc" href="#!">terms and conditions</a>.</p>
									</div>
								</div>
							</div>
							<div class="col-5 off-1" id="map"></div>
							<div class="col-5 off-7" style="margin-top:15px;">
								<div class="row" style="display:none;" id="ambassadorDetails">
									<div class="col-4">
										<img id="ambassadorImage" height="128px" width="128px" src="../images/logo.svg" />
									</div>
									<div class="col-8">
										<h3>Area Ambassador</h3>
										<h4 id="ambassadorName">Shankar Sadashiv</h4>
										<h6 style="display:none;" id="ambassadorEmail">Ambassador Email</h6>
										<h6 style="display:none;" id="ambassadorPhone">Ambassador Phone</h6>
									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
			</div>
			<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="https://twitter.com/Plog_Run/" target="_blank" class="icon alt fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="https://www.facebook.com/bengaluruplogrun/" target="_blank" class="icon alt fa-facebook"><span class="label">Facebook</span></a></li>
					<li><a href="https://www.instagram.com/bengaluruplogrun/" target="_blank" class="icon alt fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="mailto:info@bengaluruplog.run" class="icon alt fa-envelope"><span class="label">Email</span></a></li>
				</ul>
				<ul class="copyright">
					<li>
						&copy; 
						<p style="display:inline;" id="year">2018</p>
						<a href="https://www.gonative.live/" target="_blank">Go Native</a> All rights reserved. | <a href="../privacy/">Privacy Policy</a>
					</li>
				</ul>
			</footer>
		</div>
		<!-- Scripts -->
		<script src="../assets/js/jquery.min.js"></script>
		<script src="../assets/js/jquery.scrolly.min.js"></script>
		<script src="../assets/js/jquery.dropotron.min.js"></script>
		<script src="../assets/js/jquery.scrollex.min.js"></script>
		<script src="../assets/js/browser.min.js"></script>
		<script src="../assets/js/breakpoints.min.js"></script>
		<script src="../assets/js/util.js"></script>
		<script src="../assets/js/main.js"></script>
		<script type="text/javascript">
			function locList(data){
				for(obj in data.feed.entry){
					var row = data.feed.entry[obj].content.$t;
					document.getElementById('loc').innerHTML += '<option>' + row + '</option>';
				}
			}
			
			function initMapWithParameters(){
				initMap(12.9716, 77.5946, 11, null);
			}
			
			function initMap(lat, lng, zoom, geojson){
				if(geojson != null){geojson = geojson.replace(/ /g,"_"); geojson = geojson.replace(/,/g,"_");}
				var map = new google.maps.Map(document.getElementById('map'), {
					zoom: zoom,
					center: {lat: lat, lng: lng},
				});
				if(geojson != null)map.data.loadGeoJson('../locations/' + geojson + '.json');
			}
		</script>
		<script src="https://spreadsheets.google.com/feeds/cells/1tZyPqON4hEKD6WUz9bikJxsAQ2fFb_Kw3l3XyXWChZY/1/public/values?alt=json-in-script&callback=locList"></script>
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCGZCLBUuFwCaN-PkVKfuKLbkRhIOQIt3I&callback=initMapWithParameters" type="text/javascript"></script>
		<script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-firestore.js"></script>
		<script type="text/javascript">
			window.onload = function(){
			
				// Set terms and conditions
			
				var tnc = '<b>Participation: </b><ul><li>Volunteers who have registered online will be given preference over on-the-spot registration. </li><li>In case of shortage of kits due to on-the-spot registration, the registered volunteers will be given the kit first. </li><li>By taking part, all volunteers agree to photos and videos of them being taken during the event for documentation purposes. These images and videos may be used for social media purposes and official documentation as well such as reports.</li><li>There is no registration fee applicable for the event. In case anybody attempts to get your personal bank details for this cause, they are not to be trusted. </li></ul><br /><b>Day of the Event: </b><ul><li>All volunteers are requested to follow instructions as provided by your Ambassador as well as official team members of the Plog Run. </li><li>The safety measures taken during the event are for your own well being; please do abide by them. </li><li>All volunteers must wear the t-shirts and badges provided to them. As the expanse of your trail would be around 5 kilometres, it makes it easier for the ambassador to ensure everyone’s safety and wellbeing, also to make sure that nobody gets lost. </li><li>All volunteers must acknowledge and agree that personal information (including medical information entered on their event number or collected by event medical staff during or after the Event) can be stored, used and disclosed by the Bengaluru Plog Run in connection with the initiative, promotion and administration of the Event and for the compilation of statistical information.</li></ul><b>The Beginning: </b><ul><li>Volunteers shall assemble for the flag off, 20 minutes prior to the run starting. Volunteers shall then proceed to the start line. All Volunteers must be positioned behind the starting line when starting.</li></ul><br /><b>Standard Operating Procedure: </b><ul><li>Any volunteer who refuses to obey the directions of the event official, city official or ambassador, or who conducts himself/herself/themselves in an unsportsmanlike manner, or who is offensive by action or language to officials, volunteers, ambassadors or spectators may be disqualified from participating in the event and future participation at the discretion of event officials.</li></ul><br /><b>Safety of the Volunteer: </b><ul><li>Medical personnel authorised by the event to do so may examine any volunteer who appears in distress. If in the sole opinion of authorised medical personnel it is in the best interest of the volunteer’s health and welfare, medical personnel can remove the participant from the event. Volunteer must retire at once from the event if Recommended/Ordered to do so by a member of the event’s official staff, official medical staff, or any governmental authority, including fire and police officers. Volunteers are responsible and assume liability for any and all medical expenses incurred as a result of training for and/or participation in the event, including but not limited to ambulance transport, hospital stays, physician and pharmaceutical goods and services.</li></ul><br /><b>Amendments:</b> <ul><li>Event officials reserve the right, to modify, supplement or waive all or part of the event rules. Participants shall be bound by any modification or supplement of the event rules published prior to the event. Failure to follow these event rules, as can be amended, will result in immediate disqualification.</li></ul><br /><b>DISCLAIMER: </b><ul><li>In order to participate in the Bengaluru Plog Run, runners must agree to the following disclaimer:<br />"In completing this entry I declare that I will not compete in the event unless medically fit to do so and that, in any event, we will compete at my/our own risk. I accept that the organisers will not be liable for any loss, damage, action, claim, costs or expenses which may arise in consequence of my/our participation in the event. I also hereby give my permission to pass my/our details to my chosen charity and to use my/our name, quotes, video footage, and photographic likeness for marketing and promotional purposes. I also agree to the full Terms and Conditions as displayed on the event website."</li></ul>';
			
				// Initialize Firestore
				firebase.initializeApp({
					apiKey: 'AIzaSyBgEsyiffCICWGf32cc4SspPa4MvKJf1Hw',
					authDomain: 'bengaluru-plog-run.firebaseapp.com',
					projectId: 'bengaluru-plog-run'
				});
			
				// Initialize Cloud Firestore through Firebase
				var db = firebase.firestore();
			
				// Get button instance
				var cmi = document.getElementById("cmi");
			
				cmi.onclick = function(){
			
					// Get form data
					var fn = document.getElementById("fn").value;
					var ln = document.getElementById("ln").value;
					var eml = document.getElementById("eml").value;
					var org = document.getElementById("org").value;
					var phone = document.getElementById("phone").value;
					var age = document.getElementById("age").value;
					var bg = document.getElementById("bg").value;
					var tss = document.getElementById("tss").value;
					var loc = document.getElementById("loc").value;
			
					// documentCounter
					var documentCounter = 0;
			
					// Push data to Firebase!
					if(eml.includes("@") && eml.includes(".")){
						db.collection("volunteers").doc(eml).set({
							firstName: fn,
							lastName: ln,
							email: eml,
							organization: org,
							phone: phone,
							age: age,
							dateAcquired: new Date().toString(),
							bloodGroup: bg,
							tShirtSize: tss,
							locality: loc,
							designation: "volunteer",
							photoUrl: "https://bengaluru.plog.run/images/orange-logo.svg",
							facebookLink: "#",
							twitterLink: "#"
						})
						.then(function(docRef) {
							console.log("Document written with ID: ", docRef.id);
						})
						.catch(function(error) {
							console.error("Error adding document: ", error);
						});
					}
			
					if(documentCounter < 50){
						// Send welcome email to volunteer
						$.get(
							"https://admin.sotf.in/console/sendbprmail.php",
							// {fn : fn, ln : ln, eml : eml, amb : loc.toLowerCase() + "@bengaluruplog.run"},
							{fn : fn, ln : ln, eml : eml, amb : "info@bengaluruplog.run"},
								function(data) {
								console.log("%c" + data, "background: #222222; color: #BADA55;");
							}
						);
			
						// Send notification about new volunteer to area ambassador
						$.get(
							"https://admin.sotf.in/console/sendbprambmail.php",
							// {fn : fn, ln : ln, eml : eml, amb : loc.toLowerCase() + "@bengaluruplog.run"},
							{fn : fn, ln : ln, eml : eml, amb : "info@bengaluruplog.run"},
							function(data) {
								console.log("%c" + data, "background: #222222; color: #BADA55;");
							}
						);
					}
			
					// Display message on success
					document.getElementById("container").innerHTML = '<center><h2>Thank you for signing up! We\'ll get in touch with you shortly.</h2><div><a href="https://www.addtoany.com/share#url=https%3A%2F%2Fbengaluru.plog.run%2F&amp;title=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/a2a.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/facebook.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/twitter.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/google_plus?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/google_plus.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/linkedin.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/email.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/whatsapp.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/reddit.svg" width="32" height="32" style="background-color:royalblue"></a><a href="https://www.addtoany.com/add_to/wordpress?linkurl=https%3A%2F%2Fbengaluru.plog.run%2F&amp;linkname=Bengaluru%20Plog%20Run" target="_blank"><img src="https://static.addtoany.com/buttons/wordpress.svg" width="32" height="32" style="background-color:royalblue"></a></div></center>';
			
				}
			
				// Handle Terms and conditions
				document.getElementById("tnc").onclick = function(){
					document.getElementById("tncHere").innerHTML = tnc;
					document.getElementById('tncModal').style.display = "block";
				}
			
				// Handle location change
				document.getElementById("loc").onchange = function(){
					document.getElementById("ambassadorDetails").style.display = "none";
					db.collection("volunteers").where("locality", "==", document.getElementById("loc").value).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){
						if(doc.data().designation == "ambassador"){
							document.getElementById("ambassadorImage").src = doc.data().photoUrl;
							document.getElementById("ambassadorName").innerHTML = doc.data().firstName + " " + doc.data().lastName;
							document.getElementById("ambassadorEmail").innerHTML = doc.data().email;
							document.getElementById("ambassadorPhone").innerHTML = "+91 " + doc.data().phone;
						}
					});}).catch(function(error){
						console.log("Error getting documents: ", error);
					});
					document.getElementById("ambassadorDetails").style.display = "";
					var geocoder = new google.maps.Geocoder();
					geocoder.geocode({ 'address': document.getElementById("loc").value + ', Bengaluru'}, function(results, status){
						if (status == 'OK') {
							initMap(results[0].geometry.location.lat(), results[0].geometry.location.lng(), 14, document.getElementById("loc").value);
						}
						else{
							console.log('Geocode was not successful for the following reason: ' + status);
						}
					});
				}
			
				// Handle Modal closure
				document.getElementsByClassName("close")[0].onclick = function(){document.getElementById('tncModal').style.display = "none";}
				 if(event.target == document.getElementById('tncModal')){document.getElementById('tncModal').style.display = "none";}
			
				// Handle mouse over event for header logo
			
				document.getElementById("header-logo").onmouseover = function(){
					document.getElementById("header-logo").src = "../images/orange-logo.svg";
				}
				document.getElementById("header-logo").onmouseout = function(){
					document.getElementById("header-logo").src = "../images/logo.svg";
				}
			
			}
		</script>
	</body>
</html>
